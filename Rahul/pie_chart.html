
<!DOCTYPE>
<html>
<head>
	<meta charset="utf-8">
<title>Understanding the Pie Chart  </title>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<!--Including the D3.js Library-->
<script src="https://d3js.org/d3.v3.min.js"></script>
<style>
	svg{
		background-color: lightgreen;
		
	}
  .arc text{
    text-anchor: middle;
    font-size: 11px;
    stroke:deepskyblue;
  }
</style>	
</head>
<body>
	<h1 class="text-center text-success"> Understanding the Pie Charts </h1>
	<script>
			var margin = {top:20,right:20,bottom:20,left:20};
			var w = 900 - margin.right - margin.left;
			var	h = 500 - margin.top - margin.bottom;
			var r = Math.min(w,h)/2;
			
			var svg = d3.select("body").append("svg").attr("width",w).attr("height",h)
               						   .append("g")
                                       .attr("transform", "translate(" + w/2  + "," + h/2 + ")");

            var svg2 = d3.select("body").append("svg").attr("width",w).attr("height",h)
               						   .append("g")
                                       .attr("transform", "translate(" + w/2  + "," + h/2 + ")");
                           
			 var color =  d3.scale.ordinal()
      						.range(["red","blue","orange","green","pink","yellow","whitesmoke","azure","crimson","hotpink"]);
 
			  		 
      	
      		// arc generator
      		var arc = d3.svg.arc()
      					.outerRadius(r-10)
      					.innerRadius(0);

      		var arc2 = d3.svg.arc()
      					.outerRadius(r-10)
      					.innerRadius(r-70);
			

      		var labelArc = d3.svg.arc()
      						 .outerRadius(r-50)
      						 .innerRadius(r-50)	;
      		
      		// pie generator				 
      		var pie = d3.layout.pie()
      					.sort(null)
      					.value(function(d){
      						return d.value;
      					});
      	// importing data

      	d3.csv("DATA11.csv",function(error,data){
      		if(error) throw error;	

      	var g = svg.selectAll(".arc")
    		  .data(pie(data))
    			.enter().append("g")
    		  .attr("class", "arc");
      	// // append the path of arc
      	g.append("path")
      	  .attr("d",arc)
      	  .style("fill",function(d){
            return color(d.data.label);
          })
          .transition()
          .duration(4000)
          .attrTween("d",pieTween);

      	// append the text labels
      	 g.append("text")
      	     .transition()
          .duration(4000)
      	 	.attr("transform",function(d){return "translate(" + labelArc.centroid(d) +")";})
      	 	//.attr("dy",".55em")
      	 	.text(function(d){ 
      	 		return (d.data.label+ " "+ d.data.value);}); 	

      	 var g2 = svg2.selectAll(".arc2")
    		  .data(pie(data))
    			.enter().append("g")
    		  .attr("class", "arc2");
      	// // append the path of arc
      	g2.append("path")
      	  .attr("d",arc2)
      	  .style("fill",function(d){
            return color(d.data.label);
          })
          .transition()
          .duration(4000)
          .attrTween("d",donut);

      	// append the text labels
      	 g2.append("text")
      	     .transition()
          .duration(4000)
      	 	.attr("transform",function(d){return "translate(" + labelArc.centroid(d) +")";})
      	 	//.attr("dy",".55em")
      	 	.text(function(d){ 
      	 		return d.data.label;}); 	
	


      	});
      	function pieTween(b){
      		b.innerRadius = 0;
      	    var i = d3.interpolate({startAngle:0,endAngle:0},b);
      	    return function(t){return arc(i(t));};
      	}

      	function donut(b){
      		b.innerRadius = 0;
      	    var i = d3.interpolate({startAngle:0,endAngle:0},b);
      	    return function(t){return arc2(i(t));};
      	}
      						
	</script>
</body>
</html>	
		